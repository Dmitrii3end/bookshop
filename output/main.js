(()=>{var e={427:()=>{document.querySelector(".header__burger").addEventListener("click",(()=>{document.querySelector(".header__wrapper").classList.toggle("header__wrapper_aactive")}))}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var s=t[a]={exports:{}};return e[a](s,s.exports,r),s.exports}(()=>{"use strict";const e=document.querySelectorAll(".main__slider .slider__imgs img"),t=document.querySelector(".slider__imgs");let a=0,n=0;function s(){a=document.querySelector(".main__slider").offsetWidth,t.style.width=a*e.length+"px",e.forEach((e=>{e.style.width=a+"px"}))}s(),window.addEventListener("resize",s),document.querySelectorAll(".slider__dot").forEach((e=>{e.addEventListener("click",(function(){let e=function(e){let t=0;for(;e=e.previousSibling;)1==e.nodeType&&t++;return t}(this);t.style.right=e*a+"px",i(e),n=e}))}));const i=e=>{let t=document.querySelectorAll(".slider__dot");t.forEach((e=>e.classList.remove("slider__dot_active"))),t[e].classList.add("slider__dot_active")};setInterval((()=>{i(o(n+1)),t.style.right=n*a+"px"}),5e3);const o=t=>n=t<0?e.length-1:t>e.length-1?0:t;let c=0,l=document.querySelector(".categories__element_active").getAttribute("data-fullname");const d=async()=>{let e=await(t=l,r=6*c,fetch(`https://www.googleapis.com/books/v1/volumes?q=subject:${t}&printType=books&startIndex=${r}&maxResults=6&langRestrict=en&key=AIzaSyD82GEkAlJssoQzK5Luo9mlydgD4VjVJTA`).then((e=>e.json())).then((e=>e.items)).catch((()=>{console.log("error")})));var t,r;c++,e.forEach((e=>{let t=e.volumeInfo.imageLinks&&e.volumeInfo.imageLinks.thumbnail;null==t&&(t="/imgs/place-holder.jpg");let r=e.volumeInfo&&e.volumeInfo.authors;r=null==r?"":r.join(", ");let a=e.volumeInfo.title,n=e.volumeInfo.description,s=e.volumeInfo.averageRating,i=e.volumeInfo.ratingsCount,o=e.saleInfo.saleability,c=e.selfLink,l="",d="";"FOR_SALE"===o&&(l=e.saleInfo.retailPrice.amount,d=e.saleInfo.retailPrice.currencyCode);let m=u(_(),t,r,a,n,l,d,s,i,c);document.querySelector(".cards").append(m),g.has(c)&&y(m.querySelector(".card__button"))}))},u=(e,t,r,a,n,s,i,o,c,l)=>{e.querySelector(".card__image img").src=t,e.querySelector(".card__author").innerText=r;let d=e.querySelector(".card__title");a&&(d.innerText=a);let u=e.querySelector(".card__info");n&&(u.innerText=n);let _=e.querySelector(".card__cost"),g=i+s;s&&(_.innerText=g);let m=e.querySelector(".card__current-rating_active");o&&(e.querySelector(".card__rating").style.display="flex",m.style.width=o/5*100+"%");let h=e.querySelector(".card__count-reviews");c&&(h.innerText=c+" review");let y=e.querySelector(".card__button");return y.addEventListener("click",v),y.setAttribute("data-book",`${l}`),e},_=()=>{let e=document.createElement("div");return e.className="cards__card",e.innerHTML='\n    <div class="card__image">\n        <img src="" alt="book cover">\n    </div>\n    <div class="card__description">\n        <div class="card__main-info">\n            <div class="card__author"></div>\n\n            <h3 class="card__title"></h3>\n\n            <div class="card__rating">\n                <div class="card__current-rating-stars">\n                    <div class="card__current-rating">\n                        <img src="/imgs/white-star.svg" alt="rating">\n                        <img src="/imgs/white-star.svg" alt="rating">\n                        <img src="/imgs/white-star.svg" alt="rating">\n                        <img src="/imgs/white-star.svg" alt="rating">\n                        <img src="/imgs/white-star.svg" alt="rating">\n                    </div>\n                    <div class="card__current-rating_active">\n                        <img src="/imgs/yeloow-star.svg" alt="rating">\n                        <img src="/imgs/yeloow-star.svg" alt="rating">\n                        <img src="/imgs/yeloow-star.svg" alt="rating">\n                        <img src="/imgs/yeloow-star.svg" alt="rating">\n                        <img src="/imgs/yeloow-star.svg" alt="rating">\n                    </div>\n                </div>\n                <div class="card__count-reviews"></div>\n            </div>\n        </div>\n\n        <div class="card__info"></div>\n\n        <div class="card__cost"></div>\n\n        <button class="main__button card__button">buy now</button>\n    </div>\n    ',e};d();let g=new Set,m=JSON.parse(localStorage.getItem("books"));function v(){let e=this.getAttribute("data-book");b(e),y(this),h()}m&&m.length>0&&(m.forEach((e=>g.add(e))),document.querySelector("#shop-bag").setAttribute("data-count",`${m.length}`)),document.querySelectorAll(".card__button").forEach((e=>{e.addEventListener("click",v)}));const h=()=>{let e=document.querySelector("#shop-bag");"0"!==e.getAttribute("data-count")?e.classList.add("header__shop-bag"):e.classList.remove("header__shop-bag")};h(),document.querySelector("#load-more").addEventListener("click",(()=>{d()}));const y=e=>{e.innerText=e.classList.contains("card__button_shop-bag")?"buy now":"in the cart",e.classList.toggle("card__button_shop-bag")},b=e=>{let t=document.querySelector("#shop-bag"),r=t.getAttribute("data-count");g.has(e)?(t.setAttribute("data-count",""+(+r-1)),g.delete(e)):(t.setAttribute("data-count",""+(+r+1)),g.add(e))};function f(){document.querySelector(".categories__element_active").classList.remove("categories__element_active"),this.classList.add("categories__element_active"),c=0,l=this.getAttribute("data-fullname"),document.querySelector(".cards").innerHTML="",d()}window.addEventListener("beforeunload",(()=>{localStorage.setItem("books",JSON.stringify([...g]))})),document.querySelectorAll(".categories__element").forEach((e=>{e.addEventListener("click",f)})),r(427)})()})();